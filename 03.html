<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>HgInit: Consertando Mancadas</title>

<script src="c/jquery-1.4.1.js"></script>
<script src="c/basic.js"></script>

<link href="i/Hg.ico" rel="shortcut icon" />

<link href="c/styles.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-225715-20");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}</script>

	<!-- Google Website Optimizer Control Script -->
	<script>
	function utmx_section(){}function utmx(){}
	(function(){var k='2687020024',d=document,l=d.location,c=d.cookie;function f(n){
	if(c){var i=c.indexOf(n+'=');if(i>-1){var j=c.indexOf(';',i);return c.substring(i+n.
	length+1,j<0?c.length:j)}}}var x=f('__utmx'),xx=f('__utmxx'),h=l.hash;
	d.write('<sc'+'ript src="'+
	'http'+(l.protocol=='https:'?'s://ssl':'://www')+'.google-analytics.com'
	+'/siteopt.js?v=1&utmxkey='+k+'&utmx='+(x?x:'')+'&utmxx='+(xx?xx:'')+'&utmxtime='
	+new Date().valueOf()+(h?'&utmxhash='+escape(h.substr(1)):'')+
	'" type="text/javascript" charset="utf-8"></sc'+'ript>')})();
	</script><script>utmx("url",'A/B');</script>
	<!-- End of Google Website Optimizer Control Script -->
</head>
<body>
	<div id="kilnFlyOut">
		<div class="flyouttext">
		<strong>Kiln gives you:</strong><br />

		&#8226; A complete version control system based on <a href="http://mercurial.selenic.com/" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/flyout/mercurial.selenic.com');">Mercurial</a> and <a href="http://git-scm.com">Git</a><br />
	  &#8226; <a href="http://www.fogcreek.com/kiln/features/team-up/" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/flyout/branchandmerge.kilnhg.com');">Branching and merging</a> that really works 
	  </div>
	  
	 <div class="flyouttext">
	  &#8226; Secure hosting on our servers<br />
	  &#8226; Seamlessly integrated <a href="http://www.fogcreek.com/kiln/features/code-reviews" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/flyout/startreviews.kilnhg.com');">code review</a>
	  </div>
	 <div class="flyouttext"> <a href="https://secure.fogcreek.com/kiln/try/?fccmp=hginit" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/flyout/freetrial.shop.fogcreek.com');"><img src="i/getstarted.gif" width="182" height="24" border="0" /></a>
	 </div>
	 <div class="flyoutteaser"><nobr><strong>Try Kiln free!</strong> Mercurial hosting and more.</nobr></div>
	</div>

<div class="toptop" align="left">
    <ul>
        <li align="center"><a href="http://www.joelonsoftware.com/" onClick="javascript: pageTracker._trackPageview('/outbound/toptop/joelonsoftware.com');">Joel on Software</a></li>
        <li align="center"><a href="http://mercurial.selenic.com/" onClick="javascript: pageTracker._trackPageview('/outbound/toptop/mercurial.selenic.com');">Mercurial</a></li>
        <li align="center"><a href="index.html">Home</a></li>
    </ul>
</div>
<div id="dropshadow"></div>
<div id="topnav">
  <div class="tInterior">
      <a href="index.html">
        <img src="i/logo.png" border="0" alt="HgInit Home" />
      </a>
  
Um dos maiores benefícios do Mercurial é você poder usar
clones particulares para fazer experiências e desenvolver
novas funcionalidades&#8230; e se elas não funcionarem,
você pode revertê-las num instante.

  </div>
</div>
<div class="main">
  <h1>Consertando mancadas</h1>
  <div class="content">
  
<p>O Mercurial permite a você fazer experiências livremente.  Imagine que enquanto digitava normalmente, você começa a ter problemas com seu editor de texto até que algo catastrófico acontece:</p>

<div class="edit1">
                <div class="edittopbefore">
                guac </div>
                <div class="editcontent">
* 2 abacates maduros<br>
* 1/2 cebola roxa picada (cerca de 1/2 xícara)<br>
* 1-2 pimentas habanero, sem talo e sem sementes, picadas<br>
* 2 colheres de sopa de coentro picado bem fininho<br>
* 1 colher de sopa de suco de limão<br>
* 1/2 colher de chá de sal grosso<br>
* Uma pitada de pimenta-do-reino moída na hora<br>
* 1/2 tomate maduro, sem pele e sem sementes, picado<br><br>

Amasse todos os ingredientes juntos.<br>
Sirva com batatas chips.<br>
                </div>
                <img src="i/edit-bot.gif" width="387" height="76" />
    </div>


<div class="edit2">
	<img src="i/arrow2.gif" width="83" height="97" class="editArrow" />
	<div class="edittopafter">    
		guac
	</div>
  <div class="editcontent">
* 2 apabapacapatepes mapadupuropos<br>
* 1/2 cepebopolapa ropoxapa pipicapadapa (cepercapa depe 1/2 xípicaparapa)<br>
* 1-2 pipimepentapas hapabapaneperopo, sepem tapalopo epe sepem sepemepentepes, pipicapadapas<br>
* 2 copolheperepes depe sopopapa depe copoepentropo pipocapadopo bepem fipinipinhopo<br>
* 1 copolheper depe sopopapa depe supucopo depe lipimapão<br>
* 1/2 copolheper depe chapá depe sapal gropossopo<br>
* Upumapa pipitapadapa depe pipimepentapa-dopo-repeipinopo mopoipídapa napa hoporapa<br>
* 1/2 topomapatepe mapadupuropo, sepem pepelepe epe sepem sepemepentepes, pipicapadopo<br><br>

Apamapassepe topodopos opos ipingrepedipiepentepes jupuntopos.<br>
Sipirvapa copom bapatapatapas chipips.<br>
   </div>
  <img src="i/edit-bot.gif" width="387" height="76" />
 </div>
 
 <div style="clear: both;">&nbsp;</div>




<p>É pra se amar o Emacs.  Em todo caso, nem tudo está perdido.  A maneira mais comum de se recuperar de coisas assim é simplesmente revertê-las com <strong>hg revert</strong>:</p>

<div class="cheatcontent" style="margin-top:-65px">
<div class="cheattop">
	<div class="command">hg revert</div>
</div>
<p class="cheattext">reverte os arquivos alterados à como estavam no último commit</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>


<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas&gt; <strong>hg revert guac</strong>
</pre>
<div class="codebottom"> </div>
</div>

<p>Isto vai trazer os arquivos de volta exatamente da forma como eles estavam no último commit.  O Mercurial não gosta de deletar nada, então ao invés de trocar o texto da receita na <a href="http://pt.wikipedia.org/wiki/L%C3%ADngua_do_P" target="_blank">lingua do Pê</a>, ele a renomeou:</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas&gt; <strong>dir</strong>
 Volume in drive C has no label.
 Volume Serial Number is 84BD-9C2C

 Directory of C:\Users\joel\receitas

02/11/2010  11:16 AM    &lt;DIR&gt;          .
02/11/2010  11:16 AM    &lt;DIR&gt;          ..
02/11/2010  11:16 AM    &lt;DIR&gt;          .hg
02/11/2010  11:16 AM               393 guac
02/11/2010  11:15 AM               510 guac.orig
               2 File(s)            903 bytes
               3 Dir(s)  40,958,005,248 bytes free

C:\Users\joel\receitas&gt; <strong>del guac</strong>

C:\Users\joel\receitas&gt; <strong>rename guac.orig guac</strong>
</pre>
<div class="codebottom"> </div>
</div>

<p>Mas e o que seria se você tivesse ido além e dado commit na versão bagunçada?</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas&gt; <strong>hg com -m "Língua do pê é o que há"</strong>

C:\Users\joel\receitas&gt; <strong>hg log -l 3</strong>
changeset:   5:c7af1973de6d
tag:         tip
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Thu Feb 11 11:32:27 2010 -0500
summary:     Língua do pê é o que há

changeset:   4:0849ca96c304
parent:      2:4ecdb2401ab4
parent:      3:689026657682
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Mon Feb 08 16:07:23 2010 -0500
summary:     merge

changeset:   3:689026657682
parent:      1:a52881ed530d
user:        Rose Hillman &lt;rose@example.com&gt;
date:        Mon Feb 08 15:29:09 2010 -0500
summary:     pimenta mais ardida
</pre>
<div class="codebottom"> </div>
</div>


<div class="cheatcontent" style="margin-top:0px">
<div class="cheattop">
	<div class="command">hg rollback</div>
</div>
<p class="cheattext">desfaz um commit, contanto que você não o tenha transferido com hg push para mais ninguém</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>



<p>Existe um comando chamado <strong>hg rollback</strong> o qual pode salvar a sua pele, mas apenas se você ainda não o tiver transferido com hg push para mais ninguém.  E este comando desfaz <em>apenas um</em> commit.</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas&gt; <strong>hg rollback</strong>
rolling back last transaction

C:\Users\joel\receitas&gt; <strong>hg log -l 3</strong>
changeset:   4:0849ca96c304
tag:         tip
parent:      2:4ecdb2401ab4
parent:      3:689026657682
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Mon Feb 08 16:07:23 2010 -0500
summary:     merge

changeset:   3:689026657682
parent:      1:a52881ed530d
user:        Rose Hillman &lt;rose@example.com&gt;
date:        Mon Feb 08 15:29:09 2010 -0500
summary:     pimenta mais ardida

changeset:   2:4ecdb2401ab4
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Mon Feb 08 15:32:01 2010 -0500
summary:     batatas chips. Ninguém come uma só.


C:\Users\joel\receitas&gt; <strong>hg stat</strong>
M guac

C:\Users\joel\receitas&gt; <strong>hg revert guac</strong>
</pre>
<div class="codebottom"> </div>
</div>

<p>Imagine que você quer fazer uma grande experiência.  Seu chefe contratou um novo designer, Jim, e atualmente as demandas que você está recebendo dele são absurdas.  Coisas como colocar texto na cor verde fluorescente, nada se alinha (por razões &#8220;artísticas&#8221;) e a usabilidade fica terrível.  Você gostaria de vir num final de semana e refazer tudo direito, mas você tem receio de dar commit porque você não está 100% seguro de que as suas ideias serão levadas mais em conta que as desse design gráfico maluco.  O Jim é basicamente um daqueles caras que você imagina que fuma um baseado desde a hora que acorda até quando vai dormir e todo mundo acha que isso não tem problema, já que os projetos dele são bons.  Mas tudo tem um limite, não é?  E na verdade seus designs não são lá tão bons.  Além disso, ele é uma pessoa meio cabeça-dura.</p>

<p>Com o Mercurial, você pode fazer um clone experimental de todo o repositório:</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas&gt; <strong>cd ..</strong>

C:\Users\joel&gt; <strong>hg clone receitas receitas-experimental</strong>
updating to branch default
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
</pre>
<div class="codebottom"> </div>
</div>

<p>Isto não é tão inútil quanto parece.  Como tanto o repositório <strong>receitas</strong> quanto o <strong>receitas-experimental</strong> compartilham todo o seu histórico (até aqui), o Mercurial vai usar um truque de sistema de arquivos chamado &#8220;hard links&#8221;, de forma que a cópia pode ser criada bem rapidamente e sem ocupar mais um monte de espaço extra em disco.</p>

<p>Agora podemos fazer uma porção de alterações no nosso ramo experimental:</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel&gt; <strong>cd receitas-experimental</strong>
</pre>
<div class="codebottom"> </div>
</div>

<p>E aqui está um grande experimento na minha receita de guacamole:</p>
 <!-- edit text file module -->
   <div class="edit1">
                <div class="edittopbefore">
                guac </div>
                <div class="editcontent">
                &#8230;<br><br>

Amasse todos os ingredientes juntos.<br>
Sirva com batatas chips.<br>
                </div>
                <img src="i/edit-bot.gif" width="387" height="76" />
    </div>


<div class="edit2">
	<img src="i/arrow2.gif" width="83" height="97" class="editArrow" />
	<div class="edittopafter">    
		guac
	</div>
  <div class="editcontent">
&#8230;<br><br>

Amasse todos os ingredientes juntos.<br>
Sirva com batatas chips.<br><br>

<strong>Esta receita fica realmente muito boa servida com QUESO.<br><br>

QUESO é a palavra em espanhol para "queijo", mas no
supermercado você pode encontrar em fatias quadradas
e embaladas de queijo processado e que você pode
derreter no micro-ondas com uma pitada de salsa.  HUMM!</strong><br>
</span>
   </div>
  <img src="i/edit-bot.gif" width="387" height="76" />
 </div>
 
 <div style="clear: both;">&nbsp;</div>


<p>Aqui no repositório experimental, nós podemos dar commit livremente.</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas-experimental&gt; <strong>hg com -m "Queso = Queijo!"</strong>
</pre>
<div class="codebottom"> </div>
</div>

<p>Você pode fazer alterações e trabalhar livremente, dando commit em tudo o que você quiser.  Isso lhe dá o poder para fazer o controle de versão mesmo para seus experimentos mais sem noção sem, no entanto, afetar mais ninguém.</p>

<p>Se você considerar que seu experimento degringolou, você pode simplesmente deletar seu repositório experimental completamente.  E problema resolvido.</p>

<p>Mas se ele deu certo, tudo o que você precisa fazer é transferir suas novas alterações:</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas-experimental&gt; <strong>hg push</strong>
pushing to c:\Users\joel\receitas
searching for changes
adding changesets
adding manifests
adding file changes
added 1 changesets with 1 changes to 1 files
</pre>
<div class="codebottom"> </div>
</div>

<p>E para onde elas foram?</p>

<div class="cheatcontent" style="margin-top:0px">
<div class="cheattop">
	<div class="command">hg paths</div>
</div>
<p class="cheattext">mostra uma lista dos repositórios remoto conhecidos</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas-experimental&gt; <strong>hg paths</strong>
default = c:\Users\joel\receitas
</pre>
<div class="codebottom"> </div>
</div>

<p>Aqui a entrada &#8220;default&#8221; mostra o caminho do repositório para onde o <strong>hg push</strong> vai transferir as alterações se você não especificar nenhum repositório.  Normalmente é a localização do repositório que você clonou.  Neste caso, é um diretório local, mas você também pode ter uma URL aqui.</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas-experimental&gt; <strong>cd ..\recipes</strong>
</pre>
<div class="codebottom"> </div>
</div>

<p>Não se esqueça, só porque você transferiu as alterações para teste <em>repositório</em>&#8230;</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas&gt; <strong>hg log -l 3</strong>
changeset:   5:9545248f3fc9
tag:         tip
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Thu Feb 11 12:59:11 2010 -0500
summary:     Queso = Cheese!

changeset:   4:0849ca96c304
parent:      2:4ecdb2401ab4
parent:      3:689026657682
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Mon Feb 08 16:07:23 2010 -0500
summary:     merge

changeset:   3:689026657682
parent:      1:a52881ed530d
user:        Rose Hillman &lt;rose@example.com&gt;
date:        Mon Feb 08 15:29:09 2010 -0500
summary:     spicier kind of chile
</pre>
<div class="codebottom"> </div>
</div>

<p>&#8230; não quer dizer que já estamos trabalhando nessa nova versão.</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas&gt; <strong>type guac</strong>
* 2 abacates maduros
* 1/2 cebola roxa picada (cerca de 1/2 xícara)
* 1-2 pimentas dedo-de-moça, sem talo e sem sementes, picadas
* 2 colheres de sopa de coentro picado bem fininho
* 1 colher de sopa de suco de limão
* 1/2 colher de chá de sal grosso
* Uma pitada de pimenta-do-reino moída na hora
* 1/2 tomate maduro, sem pele e sem sementes, picado

Amasse todos os ingredientes juntos.
Sirva com batatas chips.

C:\Users\joel\receitas&gt; <strong>hg parent</strong>
changeset:   4:0849ca96c304
parent:      2:4ecdb2401ab4
parent:      3:689026657682
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Mon Feb 08 16:07:23 2010 -0500
summary:     merge
</pre>
<div class="codebottom"> </div>
</div>

<div class="cheatcontent" style="margin-top:0px">
<div class="cheattop">
	<div class="command">hg parent</div>
</div>
<p class="cheattext">mostra em qual ou quais changesets atualmente você está trabalhando</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>

<p>Viu?  Aquela dica sobre &#8220;Queso&#8221; está no changeset 5.  Mas meu repositório principal está trabalhando atualmente com o changeset 4 e só porque alguém transferiu alguma atualização para o <em>repositório</em>, não significa que elas já apareceram no meu diretório de trabalho, de forma que eu ainda estou trabalhando no changeset 4.</p>


<img src="i/03-repo.png" />


<p>Se eu quiser ver o que tem no changeset 5, eu tenho que usar o comando <strong>hg update</strong>:</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas&gt; <strong>hg up</strong>
1 files updated, 0 files merged, 0 files removed, 0 files unresolved

C:\Users\joel\receitas&gt; <strong>hg parent</strong>
changeset:   5:9545248f3fc9
tag:         tip
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Thu Feb 11 12:59:11 2010 -0500
summary:     Queso = Cheese!


C:\Users\joel\receitas&gt; <strong>type guac</strong>
* 2 abacates maduros
* 1/2 cebola roxa picada (cerca de 1/2 xícara)
* 1-2 pimentas dedo-de-moça, sem talo e sem sementes, picadas
* 2 colheres de sopa de coentro picado bem fininho
* 1 colher de sopa de suco de limão
* 1/2 colher de chá de sal grosso
* Uma pitada de pimenta-do-reino moída na hora
* 1/2 tomate maduro, sem pele e sem sementes, picado

Amasse todos os ingredientes juntos.
Sirva com batatas chips.

Esta receita fica realmente muito boa servida com QUESO.

QUESO é a palavra em espanhol para "queijo", mas no
supermercado você pode encontrar em fatias quadradas
e embaladas de queijo processado e que você pode
derreter no micro-ondas com uma pitada de salsa.  HUMM!
</pre>
<div class="codebottom"> </div>
</div>


<p>Percebe o que aconteceu aqui?  As atualizações vieram mas elas estava no topo da versão na qual eu estava trabalhando.  Os comandos <strong>push</strong> e <strong>pull</strong> apenas transferem alterações de um repositório para outro&#8212;eles não afetam os arquivos nos quais estou trabalhando no momento.</p>

<p>Neste instante, este é o estado dos repositórios:</p>


<img src="i/03-repo-2.png" />


<p>O Mercurial é flexível quanto a mover alterações de um repositório para outro.  Você pode transferir diretamente de um repositório experimental para o repositório central:</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas&gt; <strong>cd ..\receitas-experimental</strong>

C:\Users\joel\receitas-experimental&gt; <strong>hg outgoing http://joel.example.com:8000/</strong>
comparing with http://joel.example.com:8000/
searching for changes
changeset:   5:9545248f3fc9
tag:         tip
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Thu Feb 11 12:59:11 2010 -0500
summary:     Queso = Cheese!


C:\Users\joel\receitas-experimental&gt; <strong>hg push http://joel.example.com:8000/</strong>
pushing to http://joel.example.com:8000/
searching for changes
adding changesets
adding manifests
adding file changes
added 1 changesets with 1 changes to 1 files
</pre>
<div class="codebottom"> </div>
</div>

<p>Este push transferiu o changeset 5 para o repositório experimental diretamente para o repositório central.  Agora, se eu voltar ao meu repositório, não haverá mais nenhuma alteração a se transferir!</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas-experimental&gt; <strong>cd ..\receitas</strong>

C:\Users\joel\receitas&gt; <strong>hg out</strong>
comparing with http://joel.example.com:8000/
searching for changes
no changes found
</pre>
<div class="codebottom"> </div>
</div>

<p>Isso é porque o Mercurial sabe que o repositório central já recebeu este changeset específico de algum outro lugar.  Isso é bem útil, porque de outra forma ele poderia tentar aplicar as alterações outra vez e poderia dar uma grande confusão.</p>

<p>Quando fizeram a proposta de emprego para o designer Jim ele disse que poderia começar no dia seguinte, mas ele ficou dois meses sem aparecer.  A maioria das pessoas já tinha até esquecido dele e da proposta de emprego quando ele apareceu no escritório pela primeira vez para trabalhar, parecendo um pouco bronzeado.  Para dizer a verdade, ninguém sabia direito quem ele era ou o que estava fazendo.  Foi bem engraçado.  Ele é um cara de aparência comum.  Em algum momento as pessoas notaram, mas como ele era um novato, ninguém tinha muito peito para perguntar a ele o que tinha acontecido.  Bem como também nunca perguntaram sobre os arranhões e hematomas em seu rosto.  Não importa.  Nós odiamos aquele cara.</p>

<p>Popde acontecer de algum dia você perceber, meses depois, que você tinha cometido um erro.</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas&gt; <strong>hg diff -r 1:2 guac</strong>
diff -r a52881ed530d -r 4ecdb2401ab4 guac
--- a/guac      Mon Feb 08 14:51:18 2010 -0500
+++ b/guac      Mon Feb 08 15:32:01 2010 -0500
@@ -8,4 +8,4 @@
 * 1/2 tomate maduro, sem pele e sem sementes, picado

 Amasse todos os ingredientes juntos.
-Sirva com salgadinhos tipo nachos.
+Sirva com batatas chips.
</pre>
<div class="codebottom"> </div>
</div>

<p>Guacamole com batatas chips?  Que porcaria é essa?!</p>

<p>O Mercurial pode retornar a um changeset antigo para você.  Ele verifica o changeset, descobre como fazer <em>o contrário</em> e o faz em seu diretório de trabalho atual.  Vamos tentar retornar àquela antiga revisão 2.</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas&gt; <strong>hg backout -r 2 --merge</strong>
reverting guac
created new head
changeset 6:d828920f7f85 backs out changeset 2:4ecdb2401ab4
merging with changeset 6:d828920f7f85
merging guac
0 files updated, 1 files merged, 0 files removed, 0 files unresolved
(branch merge, don't forget to commit)
</pre>
<div class="codebottom"> </div>
</div>

<p>Puxa vida, o que aconteceu?</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
C:\Users\joel\receitas&gt; <strong>hg diff</strong>
diff -r 9545248f3fc9 guac
--- a/guac      Thu Feb 11 12:59:11 2010 -0500
+++ b/guac      Thu Feb 11 14:19:34 2010 -0500
@@ -8,7 +8,7 @@
 * 1/2 tomate maduro, sem pele e sem sementes, picado

 Amasse todos os ingredientes juntos.
-Sirva com batatas chips.
+Sirva com salgadinhos tipo nachos.

 Esta receita fica realmente muito boa servida com QUESO.

C:\Users\joel\receitas&gt; <strong>hg com -m &quot;desfaz coisas do passado&quot;</strong>

C:\Users\joel\receitas&gt; <strong>hg push</strong>
pushing to http://joel.example.com:8000/
searching for changes
adding changesets
adding manifests
adding file changes
added 2 changesets with 2 changes to 1 files
</pre>
<div class="codebottom"> </div>
</div>

<p>Agora bastante tempo pode ter passado.  As batatas chips poderiam há muito tempo ter saído da receita.  Alterações loucas de todo tipo podem ter ocorrido de forma que possa ser impossível incorporá-las nesta alteração.  Neste caso, você vai estar gerando conflitos, os quais você vai precisar resolver de alguma maneira.  Vamos falar sobre isso na próxima seção.</p>

<h2>Teste você mesmo</h2>

<p>Eis aqui as coisas que você deve saber depois da leitura deste tutorial:</p>

<ol>
  <li>Reverter alterações acidentais, antes e depois de efetivá-las</li>
  <li>Clonar um repositório localmente para experiências</li>
  <li>Transferir atualizações entre repositórios</li>
  <li>Desfazer um erro antigo que já esteja no repositório desde há muito tempo</li>
</li>
</ol>

<div class="footer">
 <div class="footernav" id="home" align="center"><a href="index.html"><span class="angleQuote">&#171;</span> Home</a></div>
 
 <div class="footernav" id="comingup">A seguir, vamos falar sobre como <br /> mesclar coisas Mercurial</div>
 <div class="footernav" id="next" align="center"><a href="04.html">Próx. <span class="angleQuote">&#187;</span></a></div>


 
 
 </div>    

<div class="pagebottom">

        <div class="bottomimg">
		<a href="http://www.kilnhg.com" target="_blank" id="logoLink" title="KilnHg.com" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/klinhg.com');">&nbsp;</a>
		<div class="bottomtext">This tutorial was brought to you by the fine folks at Fog Creek Software, makers of Kiln, a version control system powered by Mercurial</div>
        
        <div class="bottomtext"><strong>Kiln gives you:</strong><br />

&#8226; A complete version control system based on <a href="http://mercurial.selenic.com/" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/mercurial.selenic.com');">Mercurial</a> and <a href="http://git-scm.com">Git</a><br />
&#8226; <a href="http://www.fogcreek.com/kiln/features/team-up" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/branchandmerge.kilnhg.com');">Branching and merging</a> that really works<br />
&#8226; Secure hosting on our servers<br />
&#8226; Seamlessly integrated <a href="http://www.fogcreek.com/kiln/features/code-reviews" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/startreviews.kilnhg.com');">code review</a><br />
</div>
      
      <div class="bottomtext getStarted">
      <a href="https://secure.fogcreek.com/kiln/try/?fccmp=hginit" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/freetrial.shop.fogcreek.com');"><img src="i/getstarted.gif" width="182" height="24" border="0" /></a>
      </div>  
        
      </div>             
        <div class="about">
          <p>
            <strong>Looking for more?</strong>
          </p>
          
          <p>
            Fog Creek offers free monthly webinars that go over the basics of Mercurial. Sign up
            at <a href="http://www.fogcreek.com/kiln/training/#training">fogcreek.com</a>.
          </p>

          <p>
            <strong>Any questions?</strong>
          </p>
          
          <p>
            Looking for help with <a href="http://fogcreek.com/kiln">Kiln</a>? Check out the <a href="http://help.fogcreek.com/kiln">Kiln Knowledge Base</a>.
          </p>

          <p>
            <strong>About the author.</strong>
          </p> 
        
          <p>
Joel Spolsky is the founder of <a href="http://fogcreek.com" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/fogcreek.com');">Fog Creek Software</a>, a New York company that proves that you can treat programmers well and still be profitable. Programmers get private offices, free lunch, and work 40 hours a week. Customers only pay for software if they&#8217;re delighted. Fog Creek makes <a href="http://www.fogbugz.com" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/fogbugz.com');">FogBugz</a>, <a href="http://www.kilnhg.com/" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/text.kilnhg.com');">Kiln</a>, and <a href="https://www.copilot.com/" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/copilot.com');">Fog Creek Copilot</a>. Joel's blog <a href="http://www.joelonsoftware.com/" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/joelonsoftware.com');">Joel on Software</a> is read by programmers everywhere.
            
           </p>
        
        </div>


<!-- close bottom div -->
</div>
    
    
<!-- close "content" column -->     
</div>

<!-- close "main" div -->
</div>

<!-- bottom grey bar -->
<div class="botbot" align="left">
</div>

<!-- Google Website Optimizer Tracking Script -->
<script type="text/javascript">
if(typeof(_gat)!='object')document.write('<sc'+'ript src="http'+
(document.location.protocol=='https:'?'s://ssl':'://www')+
'.google-analytics.com/ga.js"></sc'+'ript>')</script>
<script type="text/javascript">
try {
var gwoTracker=_gat._getTracker("UA-225715-15");
gwoTracker._trackPageview("/2687020024/test");
}catch(err){}</script>
<!-- End of Google Website Optimizer Tracking Script -->

</body>

</html>
