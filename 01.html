<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>HgInit: Mercurial a partir do zero</title>

<script src="c/jquery-1.4.1.js"></script>
<script src="c/basic.js"></script>

<link href="i/Hg.ico" rel="shortcut icon" />

<link href="c/styles.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-225715-20");
pageTracker._setDomainName("none");
pageTracker._setAllowLinker(true);
pageTracker._trackPageview();
} catch(err) {}</script>

	<!-- Google Website Optimizer Control Script -->
	<script>
	function utmx_section(){}function utmx(){}
	(function(){var k='2687020024',d=document,l=d.location,c=d.cookie;function f(n){
	if(c){var i=c.indexOf(n+'=');if(i>-1){var j=c.indexOf(';',i);return c.substring(i+n.
	length+1,j<0?c.length:j)}}}var x=f('__utmx'),xx=f('__utmxx'),h=l.hash;
	d.write('<sc'+'ript src="'+
	'http'+(l.protocol=='https:'?'s://ssl':'://www')+'.google-analytics.com'
	+'/siteopt.js?v=1&utmxkey='+k+'&utmx='+(x?x:'')+'&utmxx='+(xx?xx:'')+'&utmxtime='
	+new Date().valueOf()+(h?'&utmxhash='+escape(h.substr(1)):'')+
	'" type="text/javascript" charset="utf-8"></sc'+'ript>')})();
	</script><script>utmx("url",'A/B');</script>
	<!-- End of Google Website Optimizer Control Script -->
</head>
<body>
	<div id="kilnFlyOut">
		<div class="flyouttext">
		<strong>Kiln lhe oferece:</strong><br />

		&#8226; Controle de versão baseado no <a href="http://mercurial.selenic.com/" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/flyout/mercurial.selenic.com');">Mercurial</a> e <a href="http://git-scm.com">Git</a><br />
	  &#8226; <a href="http://www.fogcreek.com/kiln/features/team-up/" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/flyout/branchandmerge.kilnhg.com');">Ramificação e mesclagem</a> que realmente funciona
	  </div>
	  
	 <div class="flyouttext">
	  &#8226; Hospedagem segura em nossos servidores<br />
	  &#8226; <a href="http://www.fogcreek.com/kiln/features/code-reviews" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/flyout/startreviews.kilnhg.com');">Revisão de código</a> perfeitamente integrada
	  </div>
	 <div class="flyouttext"> <a href="https://secure.fogcreek.com/kiln/try/?fccmp=hginit" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/flyout/freetrial.shop.fogcreek.com');"><img src="i/getstarted.gif" width="182" height="24" border="0" /></a>
	 </div>
	 <div class="flyoutteaser"><nobr><strong>Experimente o Kiln!</strong> Hospedagem Mercurial e muito mais.</nobr></div>
	</div>

<div class="toptop" align="left">
    <ul>
        <li align="center" style="width:220px"><a href="http://about.me/mfandrade">Traduzido por Marcelo F Andrade</a></li>
        <li align="center"><a href="http://www.joelonsoftware.com/" onClick="javascript: pageTracker._trackPageview('/outbound/toptop/joelonsoftware.com');">Joel on Software</a></li>
        <li align="center"><a href="http://mercurial.selenic.com/" onClick="javascript: pageTracker._trackPageview('/outbound/toptop/mercurial.selenic.com');">Mercurial</a></li>
        <li align="center"><a href="index.html">Home</a></li>
    </ul>
</div>
<div id="dropshadow"></div>
<div id="topnav">
  <div class="tInterior">
      <a href="index.html">
        <img src="i/logo.png" border="0" alt="HgInit Home" />
      </a>
  
  Mesmo se você estiver trabalhando sozinho, 
  você deveria utilizar o Mercurial para ter os
  benefícios do controle de versão.  Este tutorial
  mostra como é fácil pôr um diretório no Mercurial
  para que você possa acompanhar a evolução das
  versões facilmente.

  </div>
</div>
<div class="main">
  <h1>Mercurial a partir do zero</h1>
  <div class="content">
  
                        <p>
                          O Mercurial é um <em>sistema de controle de versão</em>.  Os desenvolvedores o utilizam para gerenciar código-fonte.
                          Ele serve a dois importantes propósitos:
                        </p>
                        
                        <ol>
                          <li>Mantém um rastro de cada uma das versões anteriores de cada arquivo</li>
                          <li>Pode consolidar diferentes versões de seu código, de forma que seus colegas de trabalho podem trabalhar de maneira independente no código e então mesclar suas alterações</li>
                        </ol>
                        
                        <p>Sem o Mercurial, você poderia tentar manter versões antigas
                        simplesmente fazendo várias cópias do diretório contendo todo o seu código:</p>
                        
                        <div class="i">
                          <img src="i/01-copies.png">
                        </div>
                        
                        <p>Isto é tedioso, gasta muito espaço em disco e é confuso.  Utilizar um controle de versão é a melhor maneira de fazer isso.</p>
                        
                        <p>A maioria das pessoas trabalha com o Mercurial diretamente na linha de comando, que funciona em Windows, Unix e Mac.  O comando do Mercurial é <strong>hg</strong>:
                        </p>
                        
                        <div class="codesnippet">
                          <div class="codetop"> </div>
                            <pre>
c:\hginit&gt; <strong>hg</strong>
Mercurial Distributed SCM
                                
basic commands:
                                
add        add the specified files on the next commit
annotate   show changeset information by line for each file
clone      make a copy of an existing repository
commit     commit the specified files or all outstanding changes
diff       diff repository (or selected files)
export     dump the header and diffs for one or more changesets
forget     forget the specified files on the next commit
init       create a new repository in the given directory
log        show revision history of entire repository or files
merge      merge working directory with another revision
pull       pull changes from the specified source
push       push changes to the specified destination
remove     remove the specified files on the next commit
serve      export the repository via HTTP
status     show changed files in the working directory
summary    summarize working directory state
update     update working directory
                                
use "hg help" for the full list of commands or "hg -v" for details
                            </pre>
                          <div class="codebottom"> </div>
                        </div>
    
<p>Digitar <strong>hg</strong> sem qualquer outra coisa lhe dá uma lista dos comandos mais comuns que estão disponíveis.  Você também pode tentar <strong>hg help</strong> para uma lista completa de comandos.</p>

<p>Para tirar vantagem do controle de versão, você precisa de um <em>repositório</em>.  Um repositório armazena todas as versões anteriores de cada um de seus arquivos.  Para economizar espaço em disco, ele na verdade não armazena uma cópia de cada versão&#8212;ele apenas armazena uma lista compacta das alterações feitas.</p>

<p>Antigamente, criar um repositório era uma complicação.  Você tinha que ter um servidor central em algum lugar e tinha que instalar software nele.  O Mercurial é <em>distribuído</em>, ou seja, você pode usá-lo sem nenhum servidor central.  Você pode executá-lo inteiramente em seu próprio computador.  E criar um repositório é super-fácil: você só tem que entrar no diretório onde seu código vai ficar&#8230;</p>


<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit&gt; <strong>cd CountDown</strong>

c:\hginit\CountDown&gt; <strong>dir /w</strong>
 Volume in drive C has no label.
 Volume Serial Number is 9862-36C5

 Directory of c:\hginit\CountDown

[.]                       [..]                      a.txt
AlternateMessages.xml     App.config                App.xaml
App.xaml.cs               CountDown.xaml            CountDown.xaml.cs
DevDaysCountDown.csproj   favicon.ico               [Images]
[Properties]              [TweetSharp]
               9 File(s)        155,932 bytes
               5 Dir(s)  76,083,609,600 bytes free
</pre>
<div class="codebottom"> </div>
</div>

<div class="cheat">

</div>

<p>&#8230; aqui está o meu código, então basta digitar <strong>hg init</strong>:</p>


<div class="cheatcontent" style="margin-top:-50px">
<div class="cheattop">
	<div class="command">hg init</div>
</div>
<p class="cheattext">cria um repositório</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>



<div class="codesnippet">
<div class="codetop"> </div>
<pre class="cl">
c:\hginit\CountDown&gt; <strong>hg init</strong>

c:\hginit\CountDown&gt;
</pre>
<div class="codebottom"> </div>
</div>
<p>Ué, mas aconteceu alguma coisa?  Parece que não aconteceu nada, mas se você prestar atenção, você vai ver que agora há um novo diretório chamado <strong>.hg</strong>:</p>
<div class="codesnippet">
<div class="codetop"> </div>
<pre class="cl">
c:\hginit\CountDown&gt; <strong>dir /w</strong>
 Volume in drive C has no label.
 Volume Serial Number is 9862-36C5

 Directory of c:\hginit\CountDown

[.]                       [..]                      [.hg]
a.txt                     AlternateMessages.xml     App.config
App.xaml                  App.xaml.cs               CountDown.xaml
CountDown.xaml.cs         DevDaysCountDown.csproj   favicon.ico
[Images]                  [Properties]              [TweetSharp]
               9 File(s)        155,932 bytes
               6 Dir(s)  76,083,650,560 bytes free
               </pre>
<div class="codebottom"> </div>
</div>

<p>Isso é o repositório!  É um diretório repleto de tudo o que o Mercurial precisa.  Configurações, versões antigas dos arquivos, tags, um par extra de meias para os dias de chuva, etc.  <em>Não entre nesse diretório!</em>  Você talvez nunca vá querer mexer com seu conteúdo diretamente.</p>    
    
  
<p>OK, agora que nós já temos um novo repositório, vamos querer adicionar todos esses arquivos nele.  É fácil também: apenas digite <strong>hg add</strong>.</p>

<div class="cheatcontent" style="margin-top:-60px">
<div class="cheattop">
	<div class="command">hg add</div>
</div>
<p class="cheattext">marca os arquivos para serem adicionados ao repositório.  Eles não serão adicionados efetivamente até que você dê commit</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown> <strong>hg add</strong>
adding AlternateMessages.xml
adding App.config
adding App.xaml
adding App.xaml.cs
adding CountDown.xaml
adding CountDown.xaml.cs
adding DevDaysCountDown.csproj
adding Images\background_city.jpg
adding Images\carsonified_presents.png
adding Images\darkpanel.png
adding Images\devdays.png
adding Images\failwhale.png
adding Images\holding_image.jpg
adding Images\jeff_atwood.jpg
adding Images\joel_spolsky.jpg
adding Images\logo_stackoverflow.png
adding Images\matt_lacey.jpg
adding Images\sideDarkpanel.png
adding Images\vertical_lines2.png
adding Properties\AssemblyInfo.cs
adding Properties\Resources.Designer.cs
adding Properties\Resources.resx
adding Properties\Settings.Designer.cs
adding Properties\Settings.settings
adding TweetSharp\Dimebrain.TweetSharp.dll
adding TweetSharp\Dimebrain.TweetSharp.xml
adding TweetSharp\Newtonsoft.Json.dll
adding a.txt
adding favicon.ico
</pre>
<div class="codebottom"> </div>
</div>

<p>Ainda tem mais um passo aqui&#8230; você tem que efetivar suas alterações com um <em>commit</em>.  Que alterações?  A alteração que corresponde a adicionar todos aqueles arquivos.</p>

<p>Por que você tem que dar commit?  Com o Mercurial, executar um commit equivale a dizer &#8220;ei, está vendo como os arquivos estão agora?&#8212;por favor, lembre disso.&#8221;  É como fazer uma cópia de cada diretório&#8230; toda vez que você tenha alterado alguma coisa que você possa gostar de manter, você dá commit.</p>

<!-- hg commit box -->
<div class="cheatcontent" style="margin-top:-80px">
<div class="cheattop">
	<div class="command">hg commit</div>
</div>
<p class="cheattext">salva o estado atual de todos os arquivos do repositório</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>


<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown&gt; <strong>hg commit</strong>
</pre>
<div class="codebottom"> </div>
</div>

<p>O Mercurial vai abrir um editor de texto para que você possa digitar uma mensagem de commit.  É apenas algo que você escreve para lembrar a você mesmo do que mudou com este commit.</p>


  <img src="i/01-commit0.png">

<p>Quando você salvar e sair do editor, o commit de seus arquivos estará concluído.</p>



<p>Você pode digitar <strong>hg log</strong> para ver um histórico das alterações.  É como se fosse o blog do seu repositório:</p>

<!-- hg log box -->
<div class="cheatcontent" style="margin-top:-50px">
<div class="cheattop">
	<div class="command">hg log</div>
</div>
<p class="cheattext">mostra o histórico de alterações submetidas no repositório</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown&gt; <strong>hg log</strong>
changeset:   0:da5f372c3901
tag:         tip
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Fri Feb 05 13:04:30 2010 -0500
summary:     Initial version of the CountDown code</pre>
<div class="codebottom"> </div>
</div>

<p>Vamos editar algum arquivo e ver o que acontece.</p>

 <!-- edit text file module -->
   <div class="edit1">
                <div class="edittopbefore">
                a.txt </div>
                <div class="editcontent">
                Scott Adams: Normal people believe that if it ain't 
                broke, don't fix it. Engineers believe that if it 
                ain't broke, it doesn't have enough features yet.
                </div>
                <img src="i/edit-bot.gif" width="387" height="76" />
    </div>


<div class="edit2">
	<img src="i/arrow2.gif" width="83" height="97" class="editArrow" />
	<div class="edittopafter">    
		a.txt
	</div>
  <div class="editcontent">
                <strong>SCOTT ADAMS:</strong> 
                Normal people believe that if it ain't 
                broke, don't fix it. Engineers believe that if it 
                ain't broke, it doesn't have enough features yet.
   </div>
  <img src="i/edit-bot.gif" width="387" height="76" />
 </div>
 
 <div style="clear: both;">&nbsp;</div>
 <!-- end edit text file module -->
 
 
 <p>Agora que fizemos uma outra alteração, podemos submetê-la usando <strong>hg commit</strong>:</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown&gt; <strong>hg commit</strong>
</pre>
<div class="codebottom"> </div>
</div>

<p>Veja que o Mercurial percebeu que apenas um arquivo, a.txt, sofreu alteração:</p>


  <img src="i/01-commit1.png">


<p>Com o commit efetivado, vamos dar uma olhada no log:</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown&gt; <strong>hg log</strong>
changeset:   1:a9497f468dc3
tag:         tip
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Fri Feb 05 13:26:13 2010 -0500
summary:     Capitalized "Scott Adams"

changeset:   0:da5f372c3901
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Fri Feb 05 13:04:30 2010 -0500
summary:     Initial version of the CountDown code
</pre>
<div class="codebottom"> </div>
</div>


<p>Como em qualquer blog, o Mercurial mostra as atualizações mais recentes primeiro.</p>

<p>Vou alterar mais alguma coisa, só por diversão.</p>


  <div class="edit1">
                <div class="edittopbefore">
                a.txt </div>
                <div class="editcontent">
                SCOTT ADAMS: Normal people believe that if it ain't 
                broke, don't fix it. Engineers believe that if it 
                ain't broke, it doesn't have enough features yet.
                </div>
                <img src="i/edit-bot.gif" width="387" height="76" />
    </div>


<div class="edit2">
	<img src="i/arrow2.gif" width="83" height="97" class="editArrow" />
	<div class="edittopafter">a.txt</div>
  <div class="editcontent">
               SCOTT ADAMS: 
               Normal people believe that if it <strong>isn't
broken</strong>, don't fix it. Engineers believe that if it 
<strong>isn't broken</strong>, it doesn't have enough features yet.
   </div>
  <img src="i/edit-bot.gif" width="387" height="76" />
 </div>
 
 <div style="clear: both;">&nbsp;</div>


<p>Executando o commit:</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown&gt; <strong>hg commit</strong>
</pre>
<div class="codebottom"> </div>
</div>

<p>Minha mensagem para este commit:</p>


  <img src="i/01-commit2.png">


<p>E agora, como está o log?</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown> <strong>hg log</strong>
changeset:   2:55490459b740
tag:         tip
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Fri Feb 05 13:47:43 2010 -0500
summary:     Fixed some grammar

changeset:   1:a9497f468dc3
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Fri Feb 05 13:26:13 2010 -0500
summary:     Capitalized "Scott Adams"

changeset:   0:da5f372c3901
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Fri Feb 05 13:04:30 2010 -0500
summary:     Initial version of the CountDown code
</pre>
<div class="codebottom"> </div>
</div>

<p>OK, foi divertido.  Eu fiz algumas alterações e toda vez que fiz
alguma alteração significativa eu as submeti para o repositório.</p>

<p>Eu sei o que você está pensando agora.  Você está pensando: &#8220;JOEL, ISSO PARECE GASTAR MUITO TEMPO.&#8221;
Precisa mesmo de toda essa lenga-lenga?
</p>

<p>Tenha calma, jovem gafanhoto.  Você está prestes a aprender como se beneficiar de tudo isso.</p>

<p>Número um.  Digamos que você cometa um grande erro ao editar.</p>


 <!-- edit text file module -->
   <div class="edit1">
                <div class="edittopbefore">
                a.txt </div>
                <div class="editcontent">
                SCOTT ADAMS: Normal people believe that if it isn't
broken, don't fix it. Engineers believe that if it 
isn't broken, it doesn't have enough features yet.
                </div>
                <img src="i/edit-bot.gif" width="387" height="76" />
    </div>


<div class="edit2">
	<img src="i/arrow2.gif" width="83" height="97" class="editArrow" />
	<div class="edittopafter">a.txt</div>
	<div class="editcontent">
                <strong>DAN QUAYLE: Illegitimacy is something we should 
talk about in terms of not having it.</strong>
   </div>
  <img src="i/edit-bot.gif" width="387" height="76" />
 </div>
 
 <div style="clear: both;">&nbsp;</div>
 <!-- end edit text file module -->
 

<p>E então, hum, digamos que você acidentalmente delete alguns arquivos
realmente importantes.</p>


<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown> <strong>del favicon.ico</strong>

c:\hginit\CountDown> <strong>del App.xaml</strong>
</pre>
<div class="codebottom"> </div>
</div>

<p>Na época antes do Mercurial, esta poderia ser uma boa oportunidade para se
lamentar com o administrador do sistema e perturbá-lo com questões como
<em>porque</em> o sistema de backup para aquela máquina está &#8220;momentaneamente&#8221;
desabilitado já há mais de oito meses.</p>

<p>O administrador do sistema, que todo mundo chama da Taco, é tão tímido e retraído
que sequer almoça junto com os demais colegas de equipe.  Nas das raras vezes em
que você não o vê na sua estação de trabalho, dá pra se ver as migalhas de seus
lanches e comida mexicana sobre o assento de sua cadeira giratória, um indício de que
ninguém além dele usa aquela cadeira.  Ainda que seja uma Herman Miller especial
de encosto almofadado que foram compradas para os diretores da empresa e não as
cadeiras Staples padrão mais baratas e que dão dor nas costas de qualquer um.</p>

<p>De qualquer forma: sim, não tem backup.</p>


<p>Graças ao Mercurial, porém, quando você não estiver satisfeito com suas alterações, você pode
lançar mão do comando <strong>hg revert</strong> que vai reverter imediatamente o seu diretório
ao jeito como ele estava no momento do último commit.</p>

<!-- hg log box -->
<div class="cheatcontent" style="margin-top:-80px">
<div class="cheattop">
	<div class="command">hg revert</div>
</div>
<p class="cheattext">reverte os arquivos alterados de volta a como estavam no último commit</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown> <strong>hg revert --all</strong>
reverting App.xaml
reverting a.txt
reverting favicon.ico

c:\hginit\CountDown> <strong>type a.txt</strong>
SCOTT ADAMS: Normal people believe that if it isn't
broken, don't fix it. Engineers believe that if it
isn't broken, it doesn't have enough features yet.
</pre>
<div class="codebottom"> </div>
</div>

<p>Aqui eu usei o argumento de linha de comando <strong><code>--</code>all</strong> porque
eu quero reverter <em>todos</em> os arquivos para seus estados originais.</p>

<p>Então, quando você estiver trabalhando em código-fonte com o Mercurial:</p>

<ol>
  <li>Faça algumas alterações</li>
  <li>Veja se estão funcionando</li>
  <li>Se estiverem, dê <strong>commit</strong> nelas</li>
  <li>Se não estiverem, <strong>revert</strong>a-as</li>
  <li>GOTO 1</li>
</ol>

<p>(Eu sei, eu sei.  Pelo prompt de comando do Windows e pelas declarações GOTO, eu devo ser o <em>programador menos legal</em> que já viveu.)</p>

<!-- hg log box -->
<div class="cheatcontent" style="margin-top:-10px">
<div class="cheattop">
	<div class="command">hg status</div>
</div>
<p class="cheattext">mostra uma lista dos arquivos alterados</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>

<p>Conforme o tempo passa, você pode ficar confuso sobre onde está e
quais alterações você já fez desde o último commit.  O Mercurial mantém
um registro de tudo isso para você.  Tudo que você tem a fazer é digitar
<strong>hg status</strong> e o Mercurial vai lhe mostrar uma lista dos
arquivos que foram alterados.</p>

<p>Suponha que eu crie um arquivo, edite um arquivo e delete um arquivo.</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown&gt; <strong>copy a.txt b.txt</strong>
        1 file(s) copied.

c:\hginit\CountDown&gt; <strong>notepad2 a.txt</strong>

c:\hginit\CountDown&gt; <strong>del favicon.ico</strong>

c:\hginit\CountDown&gt; <strong>hg status</strong>
M a.txt
! favicon.ico
? b.txt
</pre>
<div class="codebottom"> </div>
</div>

<p>O <strong>hg status</strong> lista quaisquer arquivos que tenham sido alterados
junto com uma letra no começo da linha que lhe diz o que aconteceu.  Um &#8220;M&#8221; é de &#8220;Modificado&#8221;&#8212;o arquivo sofreu alteração.  Um &#8220;!&#8221; significa ausente&#8212;o arquivo deveria estar aqui mas não está mais.
E um &#8220;?&#8221; quer dizer desconhecido&#8212;o Mercurial não sabe nada sobre este arquivo.  Ainda.</p>

<p>Vamos abordar estas alterações uma de cada vez.  Aquele arquivo modificado, o <strong>a.txt</strong>.
O que foi alterado nele?  Você pode ter esquecido o que você mudou!  Pois então, eu malmente me lembro
do que comi no café da manhã quase todo dia.  O que é especialmente preocupante porque é SEMPRE CEREAL.
Em todo caso, o a.txt mudou.  Mas o que mudou?</p>


<p>Há um comando pra isso: o <strong>hg diff</strong> lhe diz exatamente o que foi alterado no arquivo
desde o último commit.</p>


<div class="cheatcontent" style="margin-top:-50px">
<div class="cheattop">
	<div class="command">hg diff</div>
</div>
<p class="cheattext">mostra o que foi alterado em um arquivo</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>


<div class="codesnippet">
<div class="codetop"> </div>
<pre>c:\hginit\CountDown&gt; <strong>hg diff a.txt</strong>
diff -r 55490459b740 a.txt
--- a/a.txt     Fri Feb 05 13:47:43 2010 -0500
+++ b/a.txt     Fri Feb 05 14:31:18 2010 -0500
@@ -1,3 +1,3 @@
-SCOTT ADAMS: Normal people believe that if it isn't
+SCOTT ADAMS: Civilians believe that if it isn't
 broken, don't fix it. Engineers believe that if it
 isn't broken, it doesn't have enough features yet.
</pre>
<div class="codebottom"> </div>
</div>

<p>Este formato é um pouco estranho, mas a parte interessante é que
você pode ver que algumas linhas começam com um sinal de menos, que
foram removidas, e linhas que começam com um sinal de mais, que foram
adicionadas.  Neste caso você pode ver que o trecho que era &#8220;Normal people&#8221; foi alterado para ser agora &#8220;Civilians&#8221;.
</p>

<!-- hg log box -->
<div class="cheatcontent" style="margin-top:-10px;">
<div class="cheattop">
	<div class="command">hg remove</div>
</div>
<p class="cheattext">marca arquivos para serem removidos do repositório.
	Eles não serão efetivamente removidos até que você dê commit.</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>

<p>
Agora o arquivo ausente, favicon.ico.  Como antes, se você não queria mesmo
removê-lo, você pode trazê-lo de volta com <strong>hg revert</strong>, mas 
digamos agora que você realmente queira excluí-lo.  Sempre que você remover
(ou adicionar) um arquivo, você precisa informar o Mercurial:
</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown&gt; <strong>hg remove favicon.ico</strong>

c:\hginit\CountDown&gt; <strong>hg status</strong>
M a.txt
R favicon.ico
? b.txt
</pre>
<div class="codebottom"> </div>
</div>

<p>O &#8220;R&#8221; significa &#8220;Removido&#8221;, então na próxima vez que você der commit no Mercurial,
este arquivo será removido.  (O <em>histórico</em> do arquivo vai permanecer no repositório então, claro, você
sempre pode voltar atrás).  Finalmente, nós queremos adicionar aquele outro arquivo, o <strong>b.txt</strong>:</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown&gt; <strong>hg add</strong>
adding b.txt

c:\hginit\CountDown&gt; <strong>hg st</strong>
M a.txt
A b.txt
R favicon.ico
</pre>
<div class="codebottom"> </div>
</div>

<p>O &#8220;A&#8221; significa &#8220;Adicionado&#8221;.  Você percebeu que eu fiquei com preguiça de digitar
<strong>hg status</strong> o tempo todo?  Para digitar os comandos do Mercurial você só precisa das letras
suficientes para que eles não sejam confundidos.  Neste caso, não existem outros comandos que começam com <strong>st</strong>.</p>

<p>Tendo resolvido todos os ?&#8217;s e os !&#8217;s, eu posso seguir em frente com minhas alterações:</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown&gt; <strong>hg commit</strong>

c:\hginit\CountDown&gt; <strong>hg log</strong>
changeset:   3:2f4718ee168e
tag:         tip
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Fri Feb 05 14:54:45 2010 -0500
summary:     A few highly meaningful changes. No favicon.ico no more.

changeset:   2:55490459b740
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Fri Feb 05 13:47:43 2010 -0500
summary:     Fixed some grammar

changeset:   1:a9497f468dc3
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Fri Feb 05 13:26:13 2010 -0500
summary:     Capitalized "Scott Adams"

changeset:   0:da5f372c3901
user:        Joel Spolsky &lt;joel@joelonsoftware.com&gt;
date:        Fri Feb 05 13:04:30 2010 -0500
summary:     Initial version of the CountDown code</pre>
</pre>
<div class="codebottom"> </div>
</div>

<p>Mais uma coisa sobre a saída do 
<strong>hg log</strong>: a linha <em>changeset</em> nos mostra um número
para cada commit&#8230; na verdade dois números: um mais prático e curto como &#8220;0&#8221;
para sua revisão inicial, etc. e um longo, mais estranho em formato hexadecimal
e que você pode ignorar por agora.</p>

<p>Lembre-se que o Mercurial mantém, no repositório, informação suficiente
para reconstruir qualquer versão anterior de qualquer arquivo.</p>

<!-- hg log box -->
<div class="cheatcontent" style="margin-top:-10px">
<div class="cheattop">
	<div class="command">hg cat</div>
</div>
<p class="cheattext">mostra qualquer revisão de qualquer arquivo</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>

<p>Antes de mais nada, o simples comand <strong>hg cat</strong> pode ser usado para exibir qualquer
versão antiga de um arquivo.  Por exemplo, para ver como o a.txt se parece agora:</p>


<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown&gt; <strong>hg cat a.txt</strong>
SCOTT ADAMS: Civilians believe that if it isn't
broken, don't fix it. Engineers believe that if it
isn't broken, it doesn't have enough features yet.
</pre>
<div class="codebottom"> </div>
</div>

<p>Para ver como ele era no passado, eu posso pegar o número de algum changeset
do log.  E então usar este número no comando <strong>cat</strong> com o argumento
<strong>-r</strong> (&#8220;revisão&#8221;):</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown&gt; <strong>hg cat -r 0 a.txt</strong>
Scott Adams: Normal people believe that if it ain't
broke, don't fix it. Engineers believe that if it
ain't broke, it doesn't have enough features yet.
</pre>
<div class="codebottom"> </div>
</div>

<p>Se o conteúdo do arquivo for muito grande e complicado e só uma pequena
parte dele tiver mudado, eu posso usar o comando <strong>hg diff</strong>
com um argumento <strong>-r</strong> para exibir a diferença entre quaisquer
duas revisões.  Por exemplo, para ver o que foi modificado entre as revisões
0 e 1:</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown&gt; <strong>hg diff -r 0:1 a.txt</strong>
diff -r da5f372c3901 -r a9497f468dc3 a.txt
--- a/a.txt     Fri Feb 05 13:04:30 2010 -0500
+++ b/a.txt     Fri Feb 05 13:26:13 2010 -0500
@@ -1,3 +1,3 @@
-Scott Adams: Normal people believe that if it ain't
+SCOTT ADAMS: Normal people believe that if it ain't
 broke, don't fix it. Engineers believe that if it
 ain't broke, it doesn't have enough features yet.
</pre>
<div class="codebottom"> </div>
</div>

<p>E finalmente, se você não estiver cansado, antes de terminar este tutorial
eu quero mostrar a você <em>só mais uma coisa:</em> você pode usar o comando
<strong>hg update</strong> para voltar ou avançar no tempo para qualquer
revisão que você queira.  Bem, você não pode viajar para o futuro <em>de fato</em>,
apesar de que isso seria super-legal.  Imagine como seria se você tivesse apenas
quatro revisões e ao digitar <strong>hg update -r 103994</strong> obter alguma
versão de ficção científica futurística e muito à frente do tempo de seu código-fonte!
Mas claro que isso não é possível.</p>

<!-- hg log box -->
<div class="cheatcontent" style="margin-top:-120px">
<div class="cheattop">
	<div class="command">hg update</div>
</div>
<p class="cheattext">atualiza o diretório de trabalho para uma dada revisão</p>
<img src="i/cheatbot.png" width="241" height="41" />
</div>

<p>O que é possível é <em>voltar</em> em qualquer versão.  Veja:</p>

<div class="codesnippet">
<div class="codetop"> </div>
<pre>
c:\hginit\CountDown&gt; <strong>hg update -r 0</strong>
2 files updated, 0 files merged, 1 files removed, 0 files unresolved

c:\hginit\CountDown&gt; <strong>type a.txt</strong>
Scott Adams: Normal people believe that if it ain't
broke, don't fix it. Engineers believe that if it
ain't broke, it doesn't have enough features yet.

c:\hginit\CountDown&gt; <strong>hg up -r 1</strong>
1 files updated, 0 files merged, 0 files removed, 0 files unresolved

c:\hginit\CountDown&gt; <strong>type a.txt</strong>
SCOTT ADAMS: Normal people believe that if it ain't
broke, don't fix it. Engineers believe that if it
ain't broke, it doesn't have enough features yet.

c:\hginit\CountDown&gt; <strong>hg up</strong>
2 files updated, 0 files merged, 1 files removed, 0 files unresolved

c:\hginit\CountDown&gt; <strong>type a.txt</strong>
SCOTT ADAMS: Civilians believe that if it isn't
broken, don't fix it. Engineers believe that if it
isn't broken, it doesn't have enough features yet.
</pre>
<div class="codebottom"> </div>
</div>

<p>O <strong>hg update</strong> na verdade está modificando cada arquivo em cada diretório
que sofreu alterações para à frente e atrás ao longo do tempo.  Se um arquivo foi adicionado ou removido, ele o adiciona ou o remove.
Sem nenhum argumento, o <strong>hg update</strong> vai para a última versão.</p>

<h2>Teste você mesmo</h2>

<p>OK!  Isso é tudo para este tutorial um.  Aqui estão algumas coisas que você deve saber fazer agora:</p>

<ol>
  <li>Criar um repositório</li>
  <li>Adicionar ou remover arquivos em um repositório</li>
  <li>Depois de fazer alterações, ver que alterações você fez e ainda não estão submetidas, e então dar</li>
  <li>&#8230; commit, se gostou delas, ou</li>
  <li>&#8230; revert, se não gostou.</li>
  <li>Ver as versões antigas dos arquivos, ou mesmo mover seu diretório à frente e atrás no tempo</li>
</ol>

<div class="footer">
 <div class="footernav" id="home" align="center"><a href="index.html"><span class="angleQuote">&#171;</span> Home</a></div>
 <div class="footernav" id="comingup">A seguir, vamos ver como fazer toda sua equipe trabalhar juntos com o Mercurial.</div>
<div class="footernav" id="next" align="center"><a href="02.html">Próx. <span class="angleQuote">&#187;</span></a></div>

 
 
 </div>    

<div class="pagebottom">

        <div class="bottomimg">
		<a href="http://www.kilnhg.com" target="_blank" id="logoLink" title="KilnHg.com" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/klinhg.com');">&nbsp;</a>
		<div class="bottomtext">This tutorial was brought to you by the fine folks at Fog Creek Software, makers of Kiln, a version control system powered by Mercurial</div>
        
        <div class="bottomtext"><strong>Kiln lhe oferece:</strong><br />

&#8226; Um sistema de controle de versão completo baseado no <a href="http://mercurial.selenic.com/" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/mercurial.selenic.com');">Mercurial</a> e <a href="http://git-scm.com">Git</a><br />
&#8226; <a href="http://www.fogcreek.com/kiln/features/team-up" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/branchandmerge.kilnhg.com');">Ramificação e mesclagem</a> que realmente funcionam<br />
&#8226; Hospedagem segura em nossos servidores<br />
&#8226; <a href="http://www.fogcreek.com/kiln/features/code-reviews" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/startreviews.kilnhg.com');">Revisão de código</a> perfeitamente integrada<br />
</div>
      
      <div class="bottomtext getStarted">
      <a href="https://secure.fogcreek.com/kiln/try/?fccmp=hginit" target="_blank" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/freetrial.shop.fogcreek.com');"><img src="i/getstarted.gif" width="182" height="24" border="0" /></a>
      </div>  
        
      </div>             
        <div class="about">
          <p>
            <strong>Quer mais?</strong>
          </p>
          
          <p>
            A Fog Creek oferece webinários mensais gratuitos que abordam além dos conceitos básicos do Mercurial.
            Cadastre-se em <a href="http://www.fogcreek.com/kiln/training/#training">fogcreek.com</a>.
          </p>

          <p>
            <strong>Perguntas?</strong>
          </p>
          
          <p>
            Procurando ajuda com o <a href="http://fogcreek.com/kiln">Kiln</a>?  Confira a <a href="http://help.fogcreek.com/kiln">Base de Conhecimentos do Kiln</a>.
          </p>

          <p>
            <strong>Sobre o autor.</strong>
          </p> 
        
          <p>
Joel Spolsky é o fundador da <a href="http://fogcreek.com" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/fogcreek.com');">Fog Creek Software</a>, uma empresa de Nova York que prova que você pode tratar bem seus programadores e ainda assim ser lucrativo.  Os programadores têm escritórios particulares, almoço gratuito e trabalham não mais que 40 horas por semana.  Os clientes só pagam pelo software se eles gostarem do resultado.  A Fog Creek é a criadora do <a href="http://www.fogbugz.com" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/fogbugz.com');">FogBugz</a>, do <a href="http://www.kilnhg.com/" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/text.kilnhg.com');">Kiln</a> e do <a href="https://www.copilot.com/" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/copilot.com');">Fog Creek Copilot</a>.  O blog do Joel, <a href="http://www.joelonsoftware.com/" onClick="javascript: pageTracker._trackPageview('/outbound/bottom/joelonsoftware.com');">Joel on Software</a>, é uma referência para programadores no mundo todo.
            
           </p>
        
        </div>


<!-- close bottom div -->
</div>
    
    
<!-- close "content" column -->     
</div>

<!-- close "main" div -->
</div>

<!-- bottom grey bar -->
<div class="botbot" align="left">
</div>

<!-- Google Website Optimizer Tracking Script -->
<script type="text/javascript">
if(typeof(_gat)!='object')document.write('<sc'+'ript src="http'+
(document.location.protocol=='https:'?'s://ssl':'://www')+
'.google-analytics.com/ga.js"></sc'+'ript>')</script>
<script type="text/javascript">
try {
var gwoTracker=_gat._getTracker("UA-225715-15");
gwoTracker._trackPageview("/2687020024/test");
}catch(err){}</script>
<!-- End of Google Website Optimizer Tracking Script -->

</body>

</html>
